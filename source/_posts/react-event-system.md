---
title: React事件系统
date: 2016-12-30 14:44:58
tags: [React]
categories: React
---
本文总结于《深入React技术栈》一书。

<!--more-->

##绑定方式

React事件的绑定方式与原生的HTML事件监听器很相似

React事件属性名是驼峰式写法，事件处理则通过函数指针来绑定

```html
<button onClick={this.handleClick}>Test</button>
```

DOM0级事件，事件处理是js函数

```html
<button onclick="handleClick()">Test</button>
```

##实现机制

###事件委派

首先还是理解一下传统的事件代理机制。其原理也就是事件的冒泡机制，冒泡顾名思义是从水底下往上冒泡，所以事件的冒泡是从DOM树底部往顶部传递，只要顶部的DOM有对该事件类型的监听都能拦截到。

React也许根据这种冒泡机制，来实现自己的事件委派。

```
React把所有的事件绑定到结构的最外层，使用一个统一的事件监听器，这个事件监听器上维持一个映射来保存所有组件内部的事件监听和处理函数。当组件挂载和卸载时，只是在这个统一的事件监听器上来插入或删除一些对象。当事件发生时，首先被这个统一的事件监听器处理，然后在映射里找到真正的事件处理函数并调用。这样简化了事件处理和回收机制，效率也有很大提升。
```

###自动绑定